{"version":3,"sources":["../../src/pages/booking-summary/booking-summary.module.ts","../../src/pages/booking-summary/booking-summary.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BookingSummaryPage } from './booking-summary';\n\n@NgModule({\n  declarations: [\n    BookingSummaryPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BookingSummaryPage),\n  ],\n})\nexport class BookingSummaryPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/booking-summary/booking-summary.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\nimport { HttpClient } from '@angular/common/http';\nimport { Device } from '@ionic-native/device';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal';\nimport { CommonProvider } from '../../providers/common/common';\nimport { FormControl, FormGroup, Validators, ValidatorFn, AbstractControl } from '@angular/forms';\n/**\n * Generated class for the BookingSummaryPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-booking-summary',\n  templateUrl: 'booking-summary.html',\n})\nexport class BookingSummaryPage {\n  seat_summary = {};\n  eventID = 0;\n  uuid = '';\n  event = {};\n  isProceedToBook = false;\n  form: FormGroup;\n  coupon_code = \"\";\n  coupon_loading = false;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public http: HttpClient, private device: Device, private payPal: PayPal, private alertCtrl: AlertController, private loadingCtrl: LoadingController, private common: CommonProvider) {\n    this.form = new FormGroup({\n      coupon_code: new FormControl('', [Validators.required]),\n    });\n  }\n\n  ionViewDidLoad() {\n    this.eventID = this.navParams.get('eventID');\n\n    this.getOrderSummary({\n      eventID: this.eventID,\n      sessionID: this.device.uuid\n    });\n  }\n\n  ionViewCanLeave(): Promise<boolean> {\n    return new Promise(resolve => {\n      if (this.isProceedToBook) return resolve(true);\n\n      this.alertCtrl.create({\n        title: 'Confirm leaving',\n        message: 'Do you want to exit this page?',\n        enableBackdropDismiss: false,\n        buttons: [{\n          text: 'Leave',\n          handler: () => {\n\n            //delete pending quiz data\n            let loading = this.loadingCtrl.create({\n              spinner: 'crescent',\n              content: 'Please Wait...',\n              enableBackdropDismiss: false\n            });\n\n            loading.present();\n\n            this.http.post(this.common.apiURL + '/RemoveUnbookedSeats', {\n              eventID: this.eventID,\n              uuid: this.device.uuid,\n            }).subscribe((response: any) => {\n              if (response.status == \"OK\") {\n                loading.dismiss();\n                resolve(true);\n              }\n              else {\n                loading.dismiss();\n                resolve(false);\n              }\n            });\n          }\n        }, {\n          text: 'Stay',\n          handler: () => {\n            resolve(false);\n          }\n        }]\n      }).present();\n    });\n  }\n\n  getOrderSummary(data) {\n    let loading = this.loadingCtrl.create({\n      spinner: 'crescent',\n      content: 'Loading...',\n      enableBackdropDismiss: false\n    });\n\n    loading.present();\n\n    this.http.post(this.common.apiURL + '/OrderSummary', data).subscribe((data: any) => {\n      this.event = data;\n      loading.dismiss();\n    });\n  }\n\n  goToAddDetailsPage() {\n    this.isProceedToBook = true;\n    this.common.isProceedToBook = true;\n    this.navCtrl.push('DetailsPage', { eventID: this.eventID });\n  }\n\n  openMenu() {\n    this.navCtrl.push('JavanikaPage')\n  }\n\n  addCoupon(data) {\n\n    this.coupon_loading = true;\n\n    if(this.coupon_code != '') {\n\n        this.http.post(this.common.apiURL + '/AddDiscountCoupon', {\n          sessionID: this.device.uuid,\n          eventID: this.eventID,\n          coupon_code: this.coupon_code\n        }).subscribe((data: any) => {\n          if (data.status == \"OK\") {\n            this.getOrderSummary({\n              sessionID: \"test-2132134\",//this.device.uuid,\n              eventID: this.eventID\n            });\n\n            this.coupon_loading = false;\n            this.coupon_code = \"\";\n          }\n          else if (data.status == \"USED\") {\n\n            let alert = this.alertCtrl.create({\n              title: '',\n              message: \"<center>\" + data.errorMessage + \"</center>\",\n              enableBackdropDismiss: false,\n              buttons: [\n                {\n                  text: 'OK',\n                  handler: () => {\n                    this.coupon_loading = false;\n                  }\n                }\n              ]\n            });\n\n            alert.present();\n          }\n          else if (data.status == \"NOT APPLICABLE\") {\n\n            let alert = this.alertCtrl.create({\n              title: '',\n              message: \"<center>\" + data.errorMessage + \"</center>\",\n              enableBackdropDismiss: false,\n              buttons: [\n                {\n                  text: 'OK',\n                  handler: () => {\n                    this.coupon_loading = false;\n                  }\n                }\n              ]\n            });\n\n            alert.present();\n          }\n          else if (data.status == \"INVALID\") {\n            let alert = this.alertCtrl.create({\n              title: '',\n              message: \"<center>\" + data.errorMessage + \"</center>\",\n              enableBackdropDismiss: false,\n              buttons: [\n                {\n                  text: 'OK',\n                  handler: () => {\n                    this.coupon_loading = false;\n                  }\n                }\n              ]\n            });\n            alert.present();\n          }\n        });\n    }\n    else {\n      let alert = this.alertCtrl.create({\n        title: '',\n        message: \"<center>Please enter coupon code</center>\",\n        enableBackdropDismiss: false,\n        buttons: [\n          {\n            text: 'OK',\n            handler: () => {\n              this.coupon_loading = false;\n            }\n          }\n        ]\n      });\n      alert.present();\n    }\n  }\n\n  removeCoupon(couponID) {\n    let conf_alert = this.alertCtrl.create({\n      title: '',\n      message: \"<center>Do you want to remove this coupon?</center>\",\n      enableBackdropDismiss: false,\n      buttons: [\n        {\n          text: 'OK',\n          handler: () => {\n            \n            this.http.post(this.common.apiURL + '/RemoveDiscountCoupon', {\n              sessionID: this.device.uuid,\n              eventID: this.eventID,\n              couponID: couponID\n            }).subscribe((data: any) => {\n              if (data.status == \"OK\") {\n                let alert = this.alertCtrl.create({\n                  title: '',\n                  message: \"<center>Coupon has been removed successfully.</center>\",\n                  enableBackdropDismiss: false,\n                  buttons: [\n                    {\n                      text: 'OK',\n                      handler: () => {\n                        this.getOrderSummary({\n                          sessionID: this.device.uuid,\n                          eventID: this.eventID\n                        });\n                      }\n                    }\n                  ]\n                });\n                alert.present();\n              }\n              else if (data.status == \"ERROR\") {\n        \n                let alert = this.alertCtrl.create({\n                  title: '',\n                  message: \"<center>Sorry, Something went wrong. Please try again after sometime.</center>\",\n                  enableBackdropDismiss: false,\n                  buttons: [\n                    {\n                      text: 'OK',\n                      handler: () => {\n                      }\n                    }\n                  ]\n                });\n                alert.present();\n              }\n            });\n          }\n        }\n      ]\n    });\n    conf_alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/booking-summary/booking-summary.ts"],"sourceRoot":""}