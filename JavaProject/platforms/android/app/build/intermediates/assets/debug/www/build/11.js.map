{"version":3,"sources":["../../src/pages/details/details.module.ts","../../src/pages/details/details.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DetailsPage } from './details';\n\n@NgModule({\n  declarations: [\n    DetailsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DetailsPage),\n  ],\n})\nexport class DetailsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/details/details.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, LoadingController } from 'ionic-angular';\nimport { FormControl, FormGroup, Validators, ValidatorFn, AbstractControl } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\nimport { Device } from '@ionic-native/device';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal';\nimport { CommonProvider } from '../../providers/common/common';\n/**\n * Generated class for the DetailsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-details',\n  templateUrl: 'details.html',\n})\nexport class DetailsPage {\n  form: FormGroup;\n  name: string = null;\n  email: string = null;\n  mobile: string = null;\n  isProceedToBook = false;\n  eventID = 0;\n  uuid = \"\";\n  event = {};\n  constructor(public navCtrl: NavController, public navParams: NavParams, private http: HttpClient, private common: CommonProvider, private payPal: PayPal, private device: Device, private loadingCtrl: LoadingController, private alertCtrl: AlertController) {\n    this.form = new FormGroup({\n      name: new FormControl('', [Validators.required]),\n      email: new FormControl('', [Validators.required, Validators.email]),\n      mobile: new FormControl('', [Validators.required])\n    });\n  }\n\n  ionViewDidLoad() {\n    this.eventID = this.navParams.get('eventID');\n    this.uuid = this.device.uuid;\n\n    this.getOrderSummary({\n      eventID: this.eventID,\n      sessionID: this.uuid\n    });\n  }\n\n  ionViewCanLeave(): Promise<boolean> {\n    return new Promise(resolve => {\n      if (this.isProceedToBook) return resolve(true);\n\n      this.alertCtrl.create({\n        title: 'Confirm leaving',\n        message: 'Do you want to exit this page?',\n        enableBackdropDismiss: false,\n        buttons: [{\n          text: 'Leave',\n          handler: () => {\n\n            //delete pending quiz data\n            let loading = this.loadingCtrl.create({\n              spinner: 'crescent',\n              content: 'Please Wait...'\n            });\n\n            loading.present();\n\n            this.http.post(this.common.apiURL + '/RemoveUnbookedSeats', {\n              eventID: this.eventID,\n              uuid: this.device.uuid,\n            }).subscribe((response: any) => {\n              if (response.status == \"OK\") {\n                loading.dismiss();\n                resolve(true);\n              }\n              else {\n                loading.dismiss();\n                resolve(false);\n              }\n            });\n          }\n        }, {\n          text: 'Stay',\n          handler: () => {\n            resolve(false);\n          }\n        }]\n      }).present();\n    });\n  }\n\n  getOrderSummary(data) {\n    let loading = this.loadingCtrl.create({\n      spinner: 'crescent',\n      content: 'Loading...',\n      enableBackdropDismiss: false\n    });\n\n    loading.present();\n\n    this.http.post(this.common.apiURL + '/OrderSummary', data).subscribe((data: any) => {\n      this.event = data;\n\n      loading.dismiss();\n    });\n  }\n\n  openMenu() {\n    this.navCtrl.push('MenuPage')\n  }\n\n  addDetails(form) {\n\n    this.isProceedToBook = true;\n    \n    this.payPal.init({\n      PayPalEnvironmentProduction: 'AYZg72OmfeJnm88ghZQv7x4opaln2jZ1k6uHnhIYOaMl_RUPLGbutIGi0Gsp8b8NogkMEQuVbj5NBgvX',\n      PayPalEnvironmentSandbox: ''\n    }).then(() => {\n      this.payPal.prepareToRender('PayPalEnvironmentProduction', new PayPalConfiguration({\n\n      })).then(() => {\n        let payment = new PayPalPayment(this.event['TotalPrice'], 'USD', this.event[\"event_name\"], 'sale');\n        this.payPal.renderSinglePaymentUI(payment).then((data) => {\n\n          // Successfully paid\n          var response = {\n            id: data.response.id,\n            state: data.response.state,\n            intent: data.response.intent,\n            sessionID: this.device.uuid,\n            eventID: this.eventID,\n            amount: this.event['TotalPrice'],\n            name: this.name,\n            email: this.email,\n            mobile: this.mobile\n          };\n\n          this.placeOrder(response);\n\n        }, (err) => {\n          // Error or render dialog closed without being successful\n          alert(err);\n        });\n      }, (err) => {\n        // Error in configuration\n        alert(err);\n      });\n    }, (err) => {\n      // Error in initialization, maybe PayPal isn't supported or something else\n      alert(err);\n    });\n  }\n\n  placeOrder(data) {\n    let loading = this.loadingCtrl.create({\n      spinner: 'crescent',\n      content: 'Loading...',\n      enableBackdropDismiss: false\n    });\n\n    loading.present();\n\n    this.http.post(this.common.apiURL + '/PlaceOrder', data).subscribe((data: any) => {\n      if (data.status == \"OK\") {\n        loading.dismiss();\n        alert(\"Order placed successfully.\");\n        this.common.isProceedToBook = false;\n        this.navCtrl.push('TicketPage', {orderID: data.orderID});\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/details/details.ts"],"sourceRoot":""}